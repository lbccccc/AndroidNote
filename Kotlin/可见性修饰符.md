## **å¯è§æ€§ä¿®é¥°ç¬¦**

è®²å®Œäº†æ•°æ®é›†åˆï¼Œå†çœ‹çœ‹ Kotlin ä¸­çš„å¯è§æ€§ä¿®é¥°ç¬¦ï¼ŒKotlin ä¸­æœ‰å››ç§å¯è§æ€§ä¿®é¥°ç¬¦ï¼š

- `public `ï¼šå…¬å¼€ï¼Œå¯è§æ€§æœ€å¤§ï¼Œå“ªé‡Œéƒ½å¯ä»¥å¼•ç”¨ã€‚
- `private`ï¼šç§æœ‰ï¼Œå¯è§æ€§æœ€å°ï¼Œæ ¹æ®å£°æ˜ä½ç½®ä¸åŒå¯åˆ†ä¸ºç±»ä¸­å¯è§å’Œæ–‡ä»¶ä¸­å¯è§ã€‚
- `protected`ï¼šä¿æŠ¤ï¼Œç›¸å½“äº `private` + å­ç±»å¯è§ã€‚
- `internal`ï¼šå†…éƒ¨ï¼Œä»…å¯¹ module å†…å¯è§ã€‚

ç›¸æ¯” Java å°‘äº†ä¸€ä¸ª `default` ã€ŒåŒ…å†…å¯è§ã€ä¿®é¥°ç¬¦ï¼Œå¤šäº†ä¸€ä¸ª `internal`ã€Œmodule å†…å¯è§ã€ä¿®é¥°ç¬¦ã€‚è¿™ä¸€èŠ‚ç»“åˆä¾‹å­è®²è®² Kotlin è¿™å››ç§å¯è§æ€§ä¿®é¥°ç¬¦ï¼Œä»¥åŠåœ¨ Kotlin å’Œ Java ä¸­çš„ä¸åŒã€‚å…ˆæ¥çœ‹çœ‹ `public`ï¼š

### `public`

Java ä¸­æ²¡å†™å¯è§æ€§ä¿®é¥°ç¬¦æ—¶ï¼Œè¡¨ç¤ºåŒ…å†…å¯è§ï¼Œåªæœ‰åœ¨åŒä¸€ä¸ª `package` å†…å¯ä»¥å¼•ç”¨ï¼š

```java
â˜•ï¸                         ğŸ‘‡
package org.kotlinmaster.library; 
// æ²¡æœ‰å¯è§æ€§ä¿®é¥°ç¬¦
class User {
}
```

Java

```java
â˜•ï¸                      // ğŸ‘‡ å’Œä¸Šé¢åŒä¸€ä¸ª package
package org.kotlinmaster.library;

public class Example {
    void method() {
        new User(); // success
    }
}
```

Java

```java
â˜•ï¸
package org.kotlinmaster;
                    // ğŸ‘† å’Œä¸Šé¢ä¸æ˜¯ä¸€ä¸ª package
import org.kotlinmaster.library.User;
                          ğŸ‘†
public class OtherPackageExample {
    void method() {
        new User(); // compile-error: 'org.kotlinmaster.library.User' is not public in 'org.kotlinmaster.library'. Cannot be accessed from outside package
    }
}
```

Java

`package` å¤–å¦‚æœè¦å¼•ç”¨ï¼Œéœ€è¦åœ¨ `class` å‰åŠ ä¸Šå¯è§æ€§ä¿®é¥°ç¬¦ `public` è¡¨ç¤ºå…¬å¼€ã€‚

Kotlin ä¸­å¦‚æœä¸å†™å¯è§æ€§ä¿®é¥°ç¬¦ï¼Œå°±è¡¨ç¤ºå…¬å¼€ï¼Œå’Œ Java ä¸­ `public` ä¿®é¥°ç¬¦å…·æœ‰ç›¸åŒæ•ˆæœã€‚åœ¨ Kotlin ä¸­ `public` ä¿®é¥°ç¬¦ã€Œå¯ä»¥åŠ ï¼Œä½†æ²¡å¿…è¦ã€ã€‚

### `@hide`

åœ¨ Android çš„å®˜æ–¹ sdk ä¸­ï¼Œæœ‰ä¸€äº›æ–¹æ³•åªæƒ³å¯¹ sdk å†…å¯è§ï¼Œä¸æƒ³å¼€æ”¾ç»™ç”¨æˆ·ä½¿ç”¨ï¼ˆå› ä¸ºè¿™äº›æ–¹æ³•ä¸å¤ªç¨³å®šï¼Œåœ¨åç»­ç‰ˆæœ¬ä¸­å¾ˆæœ‰å¯èƒ½ä¼šä¿®æ”¹æˆ–åˆ æ‰ï¼‰ã€‚ä¸ºäº†å®ç°è¿™ä¸ªç‰¹æ€§ï¼Œä¼šåœ¨æ–¹æ³•çš„æ³¨é‡Šä¸­æ·»åŠ ä¸€ä¸ª Javadoc æ–¹æ³• `@hide`ï¼Œç”¨æ¥é™åˆ¶å®¢æˆ·ç«¯è®¿é—®ï¼š

```java
â˜•ï¸
/**
* @hide ğŸ‘ˆ
*/
public void hideMethod() {
    ...
}
```

Java

ä½†è¿™ç§é™åˆ¶ä¸å¤ªä¸¥æ ¼ï¼Œå¯ä»¥é€šè¿‡åå°„è®¿é—®åˆ°é™åˆ¶çš„æ–¹æ³•ã€‚é’ˆå¯¹è¿™ä¸ªæƒ…å†µï¼ŒKotlin å¼•è¿›äº†ä¸€ä¸ªæ›´ä¸ºä¸¥æ ¼çš„å¯è§æ€§ä¿®é¥°ç¬¦ï¼š`internal`ã€‚

### `internal`

`internal` è¡¨ç¤ºä¿®é¥°çš„ç±»ã€å‡½æ•°ä»…å¯¹ module å†…å¯è§ï¼Œè¿™é‡Œçš„ module å…·ä½“æŒ‡çš„æ˜¯ä¸€ç»„å…±åŒç¼–è¯‘çš„ kotlin æ–‡ä»¶ï¼Œå¸¸è§çš„å½¢å¼æœ‰ï¼š

- Android Studio é‡Œçš„ module
- Maven project

> æˆ‘ä»¬å¸¸è§çš„æ˜¯ Android Studio ä¸­çš„ module è¿™ç§æƒ…å†µï¼ŒMaven project ä»…ä½œäº†è§£å°±å¥½ï¼Œä¸ç”¨ç»†ç©¶ã€‚

`internal` åœ¨å†™ä¸€ä¸ª library module æ—¶éå¸¸æœ‰ç”¨ï¼Œå½“éœ€è¦åˆ›å»ºä¸€ä¸ªå‡½æ•°ä»…å¼€æ”¾ç»™ module å†…éƒ¨ä½¿ç”¨ï¼Œä¸æƒ³å¯¹ library çš„ä½¿ç”¨è€…å¯è§ï¼Œè¿™æ—¶å°±åº”è¯¥ç”¨ `internal` å¯è§æ€§ä¿®é¥°ç¬¦ã€‚

### Java çš„ã€ŒåŒ…å†…å¯è§ã€æ€ä¹ˆæ²¡äº†ï¼Ÿ

Java çš„ `default`ã€ŒåŒ…å†…å¯è§ã€åœ¨ Kotlin ä¸­è¢«å¼ƒç”¨æ‰äº†ï¼ŒKotlin ä¸­ä¸å®ƒæœ€æ¥è¿‘çš„å¯è§æ€§ä¿®é¥°ç¬¦æ˜¯ `internal`ã€Œmodule å†…å¯è§ã€ã€‚ä¸ºä»€ä¹ˆä¼šå¼ƒç”¨æ‰åŒ…å†…å¯è§å‘¢ï¼Ÿæˆ‘è§‰å¾—æœ‰è¿™å‡ ä¸ªåŸå› ï¼š

- Kotlin é¼“åŠ±åˆ›å»º top-level å‡½æ•°å’Œå±æ€§ï¼Œä¸€ä¸ªæºç æ–‡ä»¶å¯ä»¥åŒ…å«å¤šä¸ªç±»ï¼Œä½¿å¾— Kotlin çš„æºç ç»“æ„æ›´åŠ æ‰å¹³åŒ–ï¼ŒåŒ…ç»“æ„ä¸å†åƒ Java ä¸­é‚£ä¹ˆé‡è¦ã€‚
- ä¸ºäº†ä»£ç çš„è§£è€¦å’Œå¯ç»´æŠ¤æ€§ï¼Œmodule è¶Šæ¥è¶Šå¤šã€è¶Šæ¥è¶Šå°ï¼Œä½¿å¾— `internal` ã€Œmodule å†…å¯è§ã€å·²ç»å¯ä»¥æ»¡è¶³å¯¹äºä»£ç å°è£…çš„éœ€æ±‚ã€‚

### `protected`

- Java ä¸­ `protected` è¡¨ç¤ºåŒ…å†…å¯è§ + å­ç±»å¯è§ã€‚
- Kotlin ä¸­ `protected` è¡¨ç¤º `private` + å­ç±»å¯è§ã€‚

Kotlin ç›¸æ¯” Java `protected` çš„å¯è§èŒƒå›´æ”¶çª„äº†ï¼ŒåŸå› æ˜¯ Kotlin ä¸­ä¸å†æœ‰ã€ŒåŒ…å†…å¯è§ã€çš„æ¦‚å¿µäº†ï¼Œç›¸æ¯” Java çš„å¯è§æ€§ç€çœ¼äº `package`ï¼ŒKotlin æ›´å…³å¿ƒçš„æ˜¯ moduleã€‚

### `private`

- Java ä¸­çš„ `private` è¡¨ç¤ºç±»ä¸­å¯è§ï¼Œä½œä¸ºå†…éƒ¨ç±»æ—¶å¯¹å¤–éƒ¨ç±»ã€Œå¯è§ã€ã€‚
- Kotlin ä¸­çš„ `private` è¡¨ç¤ºç±»ä¸­æˆ–æ‰€åœ¨æ–‡ä»¶å†…å¯è§ï¼Œä½œä¸ºå†…éƒ¨ç±»æ—¶å¯¹å¤–éƒ¨ç±»ã€Œä¸å¯è§ã€ã€‚

`private` ä¿®é¥°çš„å˜é‡ã€Œç±»ä¸­å¯è§ã€å’Œ ã€Œæ–‡ä»¶ä¸­å¯è§ã€:

```kotlin
ğŸï¸
class Sample {
    private val propertyInClass = 1 // ğŸ‘ˆ ä»… Sample ç±»ä¸­å¯è§
}

private val propertyInFile = "A string." // ğŸ‘ˆ èŒƒå›´æ›´å¤§ï¼Œæ•´ä¸ªæ–‡ä»¶å¯è§
```

Kotlin

`private` ä¿®é¥°å†…éƒ¨ç±»çš„å˜é‡æ—¶ï¼Œåœ¨ Java å’Œ Kotlin ä¸­çš„åŒºåˆ«ï¼š

- åœ¨ Java ä¸­ï¼Œå¤–éƒ¨ç±»å¯ä»¥è®¿é—®å†…éƒ¨ç±»çš„ `private` å˜é‡ï¼š

  ```java
  â˜•ï¸
  public class Outter {
      public void method() {
          Inner inner = new Inner();
                              ğŸ‘‡
          int result = inner.number * 2; // success
      }
      
      private class Inner {
          private int number = 0;
      }
  }
  ```

  Java

- åœ¨ Kotlin ä¸­ï¼Œå¤–éƒ¨ç±»ä¸å¯ä»¥è®¿é—®å†…éƒ¨ç±»çš„ `private` å˜é‡ï¼š

  ```kotlin
  ğŸï¸
  class Outter {
      fun method() {
          val inner = Inner()
                              ğŸ‘‡
          val result = inner.number * 2 // compile-error: Cannot access 'number': it is private in 'Inner'
      }
      
      class Inner {
          private val number = 1
      }
  }
  ```

  Kotlin

- å¯ä»¥ä¿®é¥°ç±»å’Œæ¥å£

  - Java ä¸­ä¸€ä¸ªæ–‡ä»¶åªå…è®¸ä¸€ä¸ªå¤–éƒ¨ç±»ï¼Œæ‰€ä»¥ `class` å’Œ `interface` ä¸å…è®¸è®¾ç½®ä¸º `private`ï¼Œå› ä¸ºå£°æ˜ `private` åæ— æ³•è¢«å¤–éƒ¨ä½¿ç”¨ï¼Œè¿™æ ·å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚

  - Kotlin å…è®¸åŒä¸€ä¸ªæ–‡ä»¶å£°æ˜å¤šä¸ª `class` å’Œ top-level çš„å‡½æ•°å’Œå±æ€§ï¼Œæ‰€ä»¥ Kotlin ä¸­å…è®¸ç±»å’Œæ¥å£å£°æ˜ä¸º `private`ï¼Œå› ä¸ºåŒä¸ªæ–‡ä»¶ä¸­çš„å…¶å®ƒæˆå‘˜å¯ä»¥è®¿é—®ï¼š

    ```kotlin
    ğŸï¸                   
    private class Sample {
        val number = 1
        fun method() {
            println("Sample method()")
        }
    }
                // ğŸ‘‡ åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥å¯ä»¥è®¿é—®
    val sample = Sample()
    ```

2020 7.21 16:46
