## **å¸¸é‡**

Java ä¸­ï¼Œé™¤äº†ä¸Šé¢è®²åˆ°çš„çš„é™æ€å˜é‡å’Œæ–¹æ³•ä¼šç”¨åˆ° `static`ï¼Œå£°æ˜å¸¸é‡æ—¶ä¹Ÿä¼šç”¨åˆ°ï¼Œé‚£ Kotlin ä¸­å£°æ˜å¸¸é‡ä¼šæœ‰ä»€ä¹ˆå˜åŒ–å‘¢ï¼Ÿ

- Java ä¸­å£°æ˜å¸¸é‡ï¼š

  ```java
  â˜•ï¸
  public class Sample {
              ğŸ‘‡     ğŸ‘‡
      public static final int CONST_NUMBER = 1;
  }
  ```

  Java

- Kotlin ä¸­å£°æ˜å¸¸é‡ï¼š

  ```kotlin
  ğŸï¸
  class Sample {
      companion object {
           ğŸ‘‡                  // ğŸ‘‡
          const val CONST_NUMBER = 1
      }
  }
  
  const val CONST_SECOND_NUMBER = 2
  ```

  Kotlin

å‘ç°ä¸åŒç‚¹æœ‰ï¼š

- Kotlin çš„å¸¸é‡å¿…é¡»å£°æ˜åœ¨å¯¹è±¡ï¼ˆåŒ…æ‹¬ä¼´ç”Ÿå¯¹è±¡ï¼‰æˆ–è€…ã€Œtop-level é¡¶å±‚ã€ä¸­ï¼Œå› ä¸ºå¸¸é‡æ˜¯é™æ€çš„ã€‚
- Kotlin æ–°å¢äº†ä¿®é¥°å¸¸é‡çš„ `const` å…³é”®å­—ã€‚

é™¤æ­¤ä¹‹å¤–è¿˜æœ‰ä¸€ä¸ªåŒºåˆ«ï¼š

- Kotlin ä¸­åªæœ‰åŸºæœ¬ç±»å‹å’Œ String ç±»å‹å¯ä»¥å£°æ˜æˆå¸¸é‡ã€‚

åŸå› æ˜¯ Kotlin ä¸­çš„å¸¸é‡æŒ‡çš„æ˜¯ ã€Œcompile-time constant ç¼–è¯‘æ—¶å¸¸é‡ã€ï¼Œå®ƒçš„æ„æ€æ˜¯ã€Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™å°±çŸ¥é“è¿™ä¸ªä¸œè¥¿åœ¨æ¯ä¸ªè°ƒç”¨å¤„çš„å®é™…å€¼ã€ï¼Œå› æ­¤å¯ä»¥åœ¨ç¼–è¯‘æ—¶ç›´æ¥æŠŠè¿™ä¸ªå€¼ç¡¬ç¼–ç åˆ°ä»£ç é‡Œä½¿ç”¨çš„åœ°æ–¹ã€‚

è€ŒéåŸºæœ¬å’Œ String ç±»å‹çš„å˜é‡ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•æˆ–å˜é‡æ”¹å˜å¯¹è±¡å†…éƒ¨çš„å€¼ï¼Œè¿™æ ·è¿™ä¸ªå˜é‡å°±ä¸æ˜¯å¸¸é‡äº†ï¼Œæ¥çœ‹ä¸€ä¸ª Java çš„ä¾‹å­ï¼Œæ¯”å¦‚ä¸€ä¸ª User ç±»ï¼š

```java
â˜•ï¸
public class User {
    int id; // ğŸ‘ˆ å¯ä¿®æ”¹
    String name; // ğŸ‘ˆ å¯ä¿®æ”¹
    public User(int id, String name) {
        this.id = id;
        this.name = name;
    }
}
```

Java

åœ¨ä½¿ç”¨çš„åœ°æ–¹å£°æ˜ä¸€ä¸ª `static final` çš„ User å®ä¾‹ `user`ï¼Œå®ƒæ˜¯ä¸èƒ½äºŒæ¬¡èµ‹å€¼çš„ï¼š

```java
â˜•ï¸
static final User user = new User(123, "Zhangsan");
  ğŸ‘†    ğŸ‘†
```

Java

ä½†æ˜¯å¯ä»¥é€šè¿‡è®¿é—®è¿™ä¸ª `user` å®ä¾‹çš„æˆå‘˜å˜é‡æ”¹å˜å®ƒçš„å€¼ï¼š

```java
â˜•ï¸
user.name = "Lisi";
      ğŸ‘†
```

Java

æ‰€ä»¥ Java ä¸­çš„å¸¸é‡å¯ä»¥è®¤ä¸ºæ˜¯ã€Œä¼ªå¸¸é‡ã€ï¼Œå› ä¸ºå¯ä»¥é€šè¿‡ä¸Šé¢è¿™ç§æ–¹å¼æ”¹å˜å®ƒå†…éƒ¨çš„å€¼ã€‚è€Œ Kotlin çš„å¸¸é‡å› ä¸ºé™åˆ¶ç±»å‹å¿…é¡»æ˜¯åŸºæœ¬ç±»å‹ï¼Œæ‰€ä»¥ä¸å­˜åœ¨è¿™ç§é—®é¢˜ï¼Œæ›´ç¬¦åˆå¸¸é‡çš„å®šä¹‰ã€‚

## **æ•°ç»„å’Œé›†åˆ**

### æ•°ç»„

å£°æ˜ä¸€ä¸ª String æ•°ç»„ï¼š

- Java ä¸­çš„å†™æ³•ï¼š

  ```java
  â˜•ï¸
  String[] strs = {"a", "b", "c"};
        ğŸ‘†        ğŸ‘†
  ```

  Java

- Kotlin ä¸­çš„å†™æ³•ï¼š

  ```kotlin
  ğŸï¸
  val strs: Array<String> = arrayOf("a", "b", "c")
              ğŸ‘†              ğŸ‘†
  ```

  Kotlin

å¯ä»¥çœ‹åˆ° Kotlin ä¸­çš„æ•°ç»„æ˜¯ä¸€ä¸ªæ‹¥æœ‰æ³›å‹çš„ç±»ï¼Œåˆ›å»ºå‡½æ•°ä¹Ÿæ˜¯æ³›å‹å‡½æ•°ï¼Œå’Œé›†åˆæ•°æ®ç±»å‹ä¸€æ ·ã€‚

> é’ˆå¯¹æ³›å‹çš„çŸ¥è¯†ç‚¹ï¼Œæˆ‘ä»¬åœ¨åé¢çš„æ–‡ç« ä¼šè®²ï¼Œè¿™é‡Œå°±å…ˆæŒ‰ç…§ Java æ³›å‹æ¥ç†è§£ã€‚

å°†æ•°ç»„æ³›å‹åŒ–æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿå¯¹æ•°ç»„çš„æ“ä½œå¯ä»¥åƒé›†åˆä¸€æ ·åŠŸèƒ½æ›´å¼ºå¤§ï¼Œç”±äºæ³›å‹åŒ–ï¼ŒKotlin å¯ä»¥ç»™æ•°ç»„å¢åŠ å¾ˆå¤šæœ‰ç”¨çš„å·¥å…·å‡½æ•°ï¼š

- `get() / set()`
- `contains()`
- `first()`
- `find()`

è¿™æ ·æ•°ç»„çš„å®ç”¨æ€§å°±å¤§å¤§å¢åŠ äº†ã€‚

- å–å€¼å’Œä¿®æ”¹

  Kotlin ä¸­è·å–æˆ–è€…è®¾ç½®æ•°ç»„å…ƒç´ å’Œ Java ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ‹¬å·åŠ ä¸‹æ ‡çš„æ–¹å¼ç´¢å¼•ï¼š

  ```kotlin
  ğŸï¸
  println(strs[0])
     ğŸ‘‡      ğŸ‘†
  strs[1] = "B"
  ```

  Kotlin

- ä¸æ”¯æŒåå˜

  Kotlin çš„æ•°ç»„ç¼–è¯‘æˆå­—èŠ‚ç æ—¶ä½¿ç”¨çš„ä»ç„¶æ˜¯ Java çš„æ•°ç»„ï¼Œä½†åœ¨è¯­è¨€å±‚é¢æ˜¯æ³›å‹å®ç°ï¼Œè¿™æ ·ä¼šå¤±å»åå˜ (covariance) ç‰¹æ€§ï¼Œå°±æ˜¯å­ç±»æ•°ç»„å¯¹è±¡ä¸èƒ½èµ‹å€¼ç»™çˆ¶ç±»çš„æ•°ç»„å˜é‡ï¼š

  - Kotlin

    ```kotlin
    ğŸï¸
    val strs: Array<String> = arrayOf("a", "b", "c")
                      ğŸ‘†
    val anys: Array<Any> = strs // compile-error: Type mismatch
                    ğŸ‘†
    ```

    Kotlin

  - è€Œè¿™åœ¨ Java ä¸­æ˜¯å¯ä»¥çš„ï¼š

    ```java
    â˜•ï¸
    String[] strs = {"a", "b", "c"};
      ğŸ‘†
    Object[] objs = strs; // success
      ğŸ‘†
    ```

### é›†åˆ

Kotlin å’Œ Java ä¸€æ ·æœ‰ä¸‰ç§é›†åˆç±»å‹ï¼šListã€Set å’Œ Mapï¼Œå®ƒä»¬çš„å«ä¹‰åˆ†åˆ«å¦‚ä¸‹ï¼š

- `List` ä»¥å›ºå®šé¡ºåºå­˜å‚¨ä¸€ç»„å…ƒç´ ï¼Œå…ƒç´ å¯ä»¥é‡å¤ã€‚
- `Set` å­˜å‚¨ä¸€ç»„äº’ä¸ç›¸ç­‰çš„å…ƒç´ ï¼Œé€šå¸¸æ²¡æœ‰å›ºå®šé¡ºåºã€‚
- `Map` å­˜å‚¨ é”®-å€¼ å¯¹çš„æ•°æ®é›†åˆï¼Œé”®äº’ä¸ç›¸ç­‰ï¼Œä½†ä¸åŒçš„é”®å¯ä»¥å¯¹åº”ç›¸åŒçš„å€¼ã€‚

ä» Java åˆ° Kotlinï¼Œè¿™ä¸‰ç§é›†åˆç±»å‹çš„ä½¿ç”¨æœ‰å“ªäº›å˜åŒ–å‘¢ï¼Ÿæˆ‘ä»¬ä¾æ¬¡çœ‹çœ‹ã€‚

- List

  - Java ä¸­åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ï¼š

    ```java
    â˜•ï¸
    List<String> strList = new ArrayList<>();
    strList.add("a");
    strList.add("b");
    strList.add("c"); // ğŸ‘ˆ æ·»åŠ å…ƒç´ ç¹ç
    ```

    Java

  - Kotlin ä¸­åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ï¼š

    ```kotlin
    ğŸï¸            
    val strList = listOf("a", "b", "c")
    ```

    Kotlin

  é¦–å…ˆèƒ½çœ‹åˆ°çš„æ˜¯ Kotlin ä¸­åˆ›å»ºä¸€ä¸ª `List` ç‰¹åˆ«çš„ç®€å•ï¼Œæœ‰ç‚¹åƒåˆ›å»ºæ•°ç»„çš„ä»£ç ã€‚è€Œä¸” Kotlin ä¸­çš„ `List` å¤šäº†ä¸€ä¸ªç‰¹æ€§ï¼šæ”¯æŒ covariantï¼ˆåå˜ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥æŠŠå­ç±»çš„ `List` èµ‹å€¼ç»™çˆ¶ç±»çš„ `List` å˜é‡ï¼š

  - Kotlinï¼š

    ```kotlin
    ğŸï¸
    val strs: List<String> = listOf("a", "b", "c")
                    ğŸ‘†
    val anys: List<Any> = strs // success
                   ğŸ‘†
    ```

    Kotlin

  - è€Œè¿™åœ¨ Java ä¸­æ˜¯ä¼šæŠ¥é”™çš„ï¼š

    ```java
    â˜•ï¸
    List<String> strList = new ArrayList<>();
           ğŸ‘†
    List<Object> objList = strList; // ğŸ‘ˆ compile error: incompatible types
          ğŸ‘†  
    ```

    Java

  å¯¹äºåå˜çš„æ”¯æŒä¸å¦ï¼Œ`List` å’Œæ•°ç»„åˆšå¥½åè¿‡æ¥äº†ã€‚å…³äºåå˜ï¼Œè¿™é‡Œåªéœ€ç»“åˆä¾‹å­ç®€å•äº†è§£ä¸‹ï¼Œåé¢çš„æ–‡ç« ä¼šå¯¹å®ƒå±•å¼€è®¨è®ºã€‚

  - å’Œæ•°ç»„çš„åŒºåˆ«

    Kotlin ä¸­æ•°ç»„å’Œ MutableList çš„ API æ˜¯éå¸¸åƒçš„ï¼Œä¸»è¦çš„åŒºåˆ«æ˜¯æ•°ç»„çš„å…ƒç´ ä¸ªæ•°ä¸èƒ½å˜ã€‚é‚£åœ¨ä»€ä¹ˆæ—¶å€™ç”¨æ•°ç»„å‘¢ï¼Ÿ

    - è¿™ä¸ªé—®é¢˜åœ¨ Java ä¸­å°±å­˜åœ¨äº†ï¼Œæ•°ç»„å’Œ `List` çš„åŠŸèƒ½ç±»ä¼¼ï¼Œ`List` çš„åŠŸèƒ½æ›´å¤šä¸€äº›ï¼Œç›´è§‰ä¸Šåº”è¯¥ç”¨ `List` ã€‚ä½†æ•°ç»„ä¹Ÿä¸æ˜¯æ²¡æœ‰ä¼˜åŠ¿ï¼ŒåŸºæœ¬ç±»å‹ (`int[]`ã€`float[]`) çš„æ•°ç»„ä¸ç”¨è‡ªåŠ¨è£…ç®±ï¼Œæ€§èƒ½å¥½ä¸€ç‚¹ã€‚
    - åœ¨ Kotlin ä¸­ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œåœ¨ä¸€äº›æ€§èƒ½éœ€æ±‚æ¯”è¾ƒè‹›åˆ»çš„åœºæ™¯ï¼Œå¹¶ä¸”å…ƒç´ ç±»å‹æ˜¯åŸºæœ¬ç±»å‹æ—¶ï¼Œç”¨æ•°ç»„å¥½ä¸€ç‚¹ã€‚ä¸è¿‡è¿™é‡Œè¦æ³¨æ„ä¸€ç‚¹ï¼ŒKotlin ä¸­è¦ç”¨ä¸“é—¨çš„åŸºæœ¬ç±»å‹æ•°ç»„ç±» (`IntArray` `FloatArray` `LongArray`) æ‰å¯ä»¥å…äºè£…ç®±ã€‚ä¹Ÿå°±æ˜¯è¯´å…ƒç´ ä¸æ˜¯åŸºæœ¬ç±»å‹æ—¶ï¼Œç›¸æ¯” `Array`ï¼Œç”¨ `List` æ›´æ–¹ä¾¿äº›ã€‚

- Set

  - Java ä¸­åˆ›å»ºä¸€ä¸ª `Set`ï¼š

    ```java
    â˜•ï¸
    Set<String> strSet = new HashSet<>();
    strSet.add("a");
    strSet.add("b");
    strSet.add("c");
    ```

    Java

  - Kotlin ä¸­åˆ›å»ºç›¸åŒçš„ `Set`ï¼š

    ```kotlin
    ğŸï¸           
    val strSet = setOf("a", "b", "c")
    ```

    Kotlin

  å’Œ `List` ç±»ä¼¼ï¼Œ`Set` åŒæ ·å…·æœ‰ covariantï¼ˆåå˜ï¼‰ç‰¹æ€§ã€‚

- Map

  - Java ä¸­åˆ›å»ºä¸€ä¸ª `Map`ï¼š

    ```java
    â˜•ï¸
    Map<String, Integer> map = new HashMap<>();
    map.put("key1", 1);
    map.put("key2", 2);
    map.put("key3", 3);
    map.put("key4", 3);
    ```

    Java

  - Kotlin ä¸­åˆ›å»ºä¸€ä¸ª `Map`ï¼š

    ```kotlin
    ğŸï¸         
    val map = mapOf("key1" to 1, "key2" to 2, "key3" to 3, "key4" to 3)
    ```

    Kotlin

  å’Œä¸Šé¢ä¸¤ç§é›†åˆç±»å‹ç›¸ä¼¼åˆ›å»ºä»£ç å¾ˆç®€æ´ã€‚`mapOf` çš„æ¯ä¸ªå‚æ•°è¡¨ç¤ºä¸€ä¸ªé”®å€¼å¯¹ï¼Œ`to` è¡¨ç¤ºå°†ã€Œé”®ã€å’Œã€Œå€¼ã€å…³è”ï¼Œè¿™ä¸ªå«åšã€Œä¸­ç¼€è¡¨è¾¾å¼ã€ï¼Œè¿™é‡Œå…ˆä¸å±•å¼€ï¼Œåé¢çš„æ–‡ç« ä¼šåšä»‹ç»ã€‚

  - å–å€¼å’Œä¿®æ”¹

    - Kotlin ä¸­çš„ Map é™¤äº†å’Œ Java ä¸€æ ·å¯ä»¥ä½¿ç”¨ `get()` æ ¹æ®é”®è·å–å¯¹åº”çš„å€¼ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ–¹æ‹¬å·çš„æ–¹å¼è·å–ï¼š

      ```kotlin
      ğŸï¸
                       ğŸ‘‡
      val value1 = map.get("key1")
                     ğŸ‘‡
      val value2 = map["key2"]
      ```

      Kotlin

    - ç±»ä¼¼çš„ï¼ŒKotlin ä¸­ä¹Ÿå¯ä»¥ç”¨æ–¹æ‹¬å·çš„æ–¹å¼æ”¹å˜ `Map` ä¸­é”®å¯¹åº”çš„å€¼ï¼š

      ```kotlin
      ğŸï¸       
                    ğŸ‘‡
      val map = mutableMapOf("key1" to 1, "key2" to 2)
          ğŸ‘‡
      map.put("key1", 2)
         ğŸ‘‡
      map["key1"] = 2    
      ```

      Kotlin

    è¿™é‡Œç”¨åˆ°äº†ã€Œæ“ä½œç¬¦é‡è½½ã€çš„çŸ¥è¯†ï¼Œå®ç°äº†å’Œæ•°ç»„ä¸€æ ·çš„ã€ŒPositional Access Operationsã€ï¼Œå…³äºè¿™ä¸ªæ¦‚å¿µè¿™é‡Œå…ˆä¸å±•å¼€ï¼Œåé¢ä¼šè®²åˆ°ã€‚

- å¯å˜é›†åˆ/ä¸å¯å˜é›†åˆ

  ä¸Šé¢ä¿®æ”¹ `Map` å€¼çš„ä¾‹å­ä¸­ï¼Œåˆ›å»ºå‡½æ•°ç”¨çš„æ˜¯ `mutableMapOf()` è€Œä¸æ˜¯ `mapOf()`ï¼Œå› ä¸ºåªæœ‰ `mutableMapOf()` åˆ›å»ºçš„ `Map` æ‰å¯ä»¥ä¿®æ”¹ã€‚Kotlin ä¸­é›†åˆåˆ†ä¸ºä¸¤ç§ç±»å‹ï¼šåªè¯»çš„å’Œå¯å˜çš„ã€‚è¿™é‡Œçš„åªè¯»æœ‰ä¸¤å±‚æ„æ€ï¼š

  - é›†åˆçš„ size ä¸å¯å˜
  - é›†åˆä¸­çš„å…ƒç´ å€¼ä¸å¯å˜

  ä»¥ä¸‹æ˜¯ä¸‰ç§é›†åˆç±»å‹åˆ›å»ºä¸å¯å˜å’Œå¯å˜å®ä¾‹çš„ä¾‹å­ï¼š

  - `listOf()` åˆ›å»ºä¸å¯å˜çš„ `List`ï¼Œ`mutableListOf()` åˆ›å»ºå¯å˜çš„ `List`ã€‚
  - `setOf()` åˆ›å»ºä¸å¯å˜çš„ `Set`ï¼Œ`mutableSetOf()` åˆ›å»ºå¯å˜çš„ `Set`ã€‚
  - `mapOf()` åˆ›å»ºä¸å¯å˜çš„ `Map`ï¼Œ`mutableMapOf()` åˆ›å»ºå¯å˜çš„ `Map`ã€‚

  å¯ä»¥çœ‹åˆ°ï¼Œæœ‰ `mutable` å‰ç¼€çš„å‡½æ•°åˆ›å»ºçš„æ˜¯å¯å˜çš„é›†åˆï¼Œæ²¡æœ‰ `mutbale` å‰ç¼€çš„åˆ›å»ºçš„æ˜¯ä¸å¯å˜çš„é›†åˆï¼Œä¸è¿‡ä¸å¯å˜çš„å¯ä»¥é€šè¿‡ `toMutable*()` ç³»å‡½æ•°è½¬æ¢æˆå¯å˜çš„é›†åˆï¼š

  ```kotlin
  ğŸï¸
  val strList = listOf("a", "b", "c")
              ğŸ‘‡
  strList.toMutableList()
  val strSet = setOf("a", "b", "c")
              ğŸ‘‡
  strSet.toMutableSet()
  val map = mapOf("key1" to 1, "key2" to 2, "key3" to 3, "key4" to 3)
           ğŸ‘‡
  map.toMutableMap()
  ```

  Kotlin

  ç„¶åå°±å¯ä»¥å¯¹é›†åˆè¿›è¡Œä¿®æ”¹äº†ï¼Œè¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ä¸‹ï¼š

  - `toMutable*()` è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°å»ºçš„é›†åˆï¼ŒåŸæœ‰çš„é›†åˆè¿˜æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥åªèƒ½å¯¹å‡½æ•°è¿”å›çš„é›†åˆä¿®æ”¹ã€‚

### `Sequence`

é™¤äº†é›†åˆ Kotlin è¿˜å¼•å…¥äº†ä¸€ä¸ªæ–°çš„å®¹å™¨ç±»å‹ `Sequence`ï¼Œå®ƒå’Œ `Iterable` ä¸€æ ·ç”¨æ¥éå†ä¸€ç»„æ•°æ®å¹¶å¯ä»¥å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œç‰¹å®šçš„å¤„ç†ï¼Œå…ˆæ¥çœ‹çœ‹å¦‚ä½•åˆ›å»ºä¸€ä¸ª `Sequence`ã€‚

- åˆ›å»º

  - ç±»ä¼¼ `listOf()` ï¼Œä½¿ç”¨ä¸€ç»„å…ƒç´ åˆ›å»ºï¼š

    ```kotlin
    ğŸï¸
    sequenceOf("a", "b", "c")
    ```

    Kotlin

  - ä½¿ç”¨ `Iterable` åˆ›å»ºï¼š

    ```kotlin
    ğŸï¸
    val list = listOf("a", "b", "c")
    list.asSequence()
    ```

    Kotlin

    è¿™é‡Œçš„ `List` å®ç°äº† `Iterable` æ¥å£ã€‚

  - ä½¿ç”¨ lambda è¡¨è¾¾å¼åˆ›å»ºï¼š

    ```kotlin
    ğŸï¸                          // ğŸ‘‡ ç¬¬ä¸€ä¸ªå…ƒç´ 
    val sequence = generateSequence(0) { it + 1 }
                                      // ğŸ‘† lambda è¡¨è¾¾å¼ï¼Œè´Ÿè´£ç”Ÿæˆç¬¬äºŒä¸ªåŠä»¥åçš„å…ƒç´ ï¼Œit è¡¨ç¤ºå‰ä¸€ä¸ªå…ƒç´ 
    ```

