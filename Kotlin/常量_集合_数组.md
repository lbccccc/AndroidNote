é›†åˆ
Kotlin å’Œ Java ä¸€æ ·æœ‰ä¸‰ç§é›†åˆç±»å‹ï¼šListã€Set å’Œ Mapï¼Œå®ƒä»¬çš„å«ä¹‰åˆ†åˆ«å¦‚ä¸‹ï¼š

List ä»¥å›ºå®šé¡ºåºå­˜å‚¨ä¸€ç»„å…ƒç´ ï¼Œå…ƒç´ å¯ä»¥é‡å¤ã€‚
Set å­˜å‚¨ä¸€ç»„äº’ä¸ç›¸ç­‰çš„å…ƒç´ ï¼Œé€šå¸¸æ²¡æœ‰å›ºå®šé¡ºåºã€‚
Map å­˜å‚¨ é”®-å€¼ å¯¹çš„æ•°æ®é›†åˆï¼Œé”®äº’ä¸ç›¸ç­‰ï¼Œä½†ä¸åŒçš„é”®å¯ä»¥å¯¹åº”ç›¸åŒçš„å€¼ã€‚
ä» Java åˆ° Kotlinï¼Œè¿™ä¸‰ç§é›†åˆç±»å‹çš„ä½¿ç”¨æœ‰å“ªäº›å˜åŒ–å‘¢ï¼Ÿæˆ‘ä»¬ä¾æ¬¡çœ‹çœ‹ã€‚

List

Java ä¸­åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ï¼š

â˜•ï¸
List<String> strList = new ArrayList<>();
strList.add("a");
strList.add("b");
strList.add("c"); // ğŸ‘ˆ æ·»åŠ å…ƒç´ ç¹ç
Java
Kotlin ä¸­åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ï¼š

ğŸï¸            
val strList = listOf("a", "b", "c")
Kotlin
é¦–å…ˆèƒ½çœ‹åˆ°çš„æ˜¯ Kotlin ä¸­åˆ›å»ºä¸€ä¸ª List ç‰¹åˆ«çš„ç®€å•ï¼Œæœ‰ç‚¹åƒåˆ›å»ºæ•°ç»„çš„ä»£ç ã€‚è€Œä¸” Kotlin ä¸­çš„ List å¤šäº†ä¸€ä¸ªç‰¹æ€§ï¼šæ”¯æŒ covariantï¼ˆåå˜ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥æŠŠå­ç±»çš„ List èµ‹å€¼ç»™çˆ¶ç±»çš„ List å˜é‡ï¼š

Kotlinï¼š

ğŸï¸
val strs: List<String> = listOf("a", "b", "c")
                ğŸ‘†
val anys: List<Any> = strs // success
               ğŸ‘†
Kotlin
è€Œè¿™åœ¨ Java ä¸­æ˜¯ä¼šæŠ¥é”™çš„ï¼š

â˜•ï¸
List<String> strList = new ArrayList<>();
       ğŸ‘†
List<Object> objList = strList; // ğŸ‘ˆ compile error: incompatible types
      ğŸ‘†  
Java
å¯¹äºåå˜çš„æ”¯æŒä¸å¦ï¼ŒList å’Œæ•°ç»„åˆšå¥½åè¿‡æ¥äº†ã€‚å…³äºåå˜ï¼Œè¿™é‡Œåªéœ€ç»“åˆä¾‹å­ç®€å•äº†è§£ä¸‹ï¼Œåé¢çš„æ–‡ç« ä¼šå¯¹å®ƒå±•å¼€è®¨è®ºã€‚

å’Œæ•°ç»„çš„åŒºåˆ«

Kotlin ä¸­æ•°ç»„å’Œ MutableList çš„ API æ˜¯éå¸¸åƒçš„ï¼Œä¸»è¦çš„åŒºåˆ«æ˜¯æ•°ç»„çš„å…ƒç´ ä¸ªæ•°ä¸èƒ½å˜ã€‚é‚£åœ¨ä»€ä¹ˆæ—¶å€™ç”¨æ•°ç»„å‘¢ï¼Ÿ

è¿™ä¸ªé—®é¢˜åœ¨ Java ä¸­å°±å­˜åœ¨äº†ï¼Œæ•°ç»„å’Œ List çš„åŠŸèƒ½ç±»ä¼¼ï¼ŒList çš„åŠŸèƒ½æ›´å¤šä¸€äº›ï¼Œç›´è§‰ä¸Šåº”è¯¥ç”¨ List ã€‚ä½†æ•°ç»„ä¹Ÿä¸æ˜¯æ²¡æœ‰ä¼˜åŠ¿ï¼ŒåŸºæœ¬ç±»å‹ (int[]ã€float[]) çš„æ•°ç»„ä¸ç”¨è‡ªåŠ¨è£…ç®±ï¼Œæ€§èƒ½å¥½ä¸€ç‚¹ã€‚

åœ¨ Kotlin ä¸­ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œåœ¨ä¸€äº›æ€§èƒ½éœ€æ±‚æ¯”è¾ƒè‹›åˆ»çš„åœºæ™¯ï¼Œå¹¶ä¸”å…ƒç´ ç±»å‹æ˜¯åŸºæœ¬ç±»å‹æ—¶ï¼Œç”¨æ•°ç»„å¥½ä¸€ç‚¹ã€‚ä¸è¿‡è¿™é‡Œè¦æ³¨æ„ä¸€ç‚¹ï¼ŒKotlin ä¸­è¦ç”¨ä¸“é—¨çš„åŸºæœ¬ç±»å‹æ•°ç»„ç±» (IntArray FloatArray LongArray) æ‰å¯ä»¥å…äºè£…ç®±ã€‚ä¹Ÿå°±æ˜¯è¯´å…ƒç´ ä¸æ˜¯åŸºæœ¬ç±»å‹æ—¶ï¼Œç›¸æ¯” Arrayï¼Œç”¨ List æ›´æ–¹ä¾¿äº›ã€‚

Set

Java ä¸­åˆ›å»ºä¸€ä¸ª Setï¼š

â˜•ï¸
Set<String> strSet = new HashSet<>();
strSet.add("a");
strSet.add("b");
strSet.add("c");
Java
Kotlin ä¸­åˆ›å»ºç›¸åŒçš„ Setï¼š

ğŸï¸           
val strSet = setOf("a", "b", "c")
Kotlin
å’Œ List ç±»ä¼¼ï¼ŒSet åŒæ ·å…·æœ‰ covariantï¼ˆåå˜ï¼‰ç‰¹æ€§ã€‚

Map

Java ä¸­åˆ›å»ºä¸€ä¸ª Mapï¼š

â˜•ï¸
Map<String, Integer> map = new HashMap<>();
map.put("key1", 1);
map.put("key2", 2);
map.put("key3", 3);
map.put("key4", 3);
Java
Kotlin ä¸­åˆ›å»ºä¸€ä¸ª Mapï¼š

ğŸï¸         
val map = mapOf("key1" to 1, "key2" to 2, "key3" to 3, "key4" to 3)
Kotlin
å’Œä¸Šé¢ä¸¤ç§é›†åˆç±»å‹ç›¸ä¼¼åˆ›å»ºä»£ç å¾ˆç®€æ´ã€‚mapOf çš„æ¯ä¸ªå‚æ•°è¡¨ç¤ºä¸€ä¸ªé”®å€¼å¯¹ï¼Œto è¡¨ç¤ºå°†ã€Œé”®ã€å’Œã€Œå€¼ã€å…³è”ï¼Œè¿™ä¸ªå«åšã€Œä¸­ç¼€è¡¨è¾¾å¼ã€ï¼Œè¿™é‡Œå…ˆä¸å±•å¼€ï¼Œåé¢çš„æ–‡ç« ä¼šåšä»‹ç»ã€‚

å–å€¼å’Œä¿®æ”¹

Kotlin ä¸­çš„ Map é™¤äº†å’Œ Java ä¸€æ ·å¯ä»¥ä½¿ç”¨ get() æ ¹æ®é”®è·å–å¯¹åº”çš„å€¼ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ–¹æ‹¬å·çš„æ–¹å¼è·å–ï¼š

ğŸï¸
                 ğŸ‘‡
val value1 = map.get("key1")
               ğŸ‘‡
val value2 = map["key2"]
Kotlin
ç±»ä¼¼çš„ï¼ŒKotlin ä¸­ä¹Ÿå¯ä»¥ç”¨æ–¹æ‹¬å·çš„æ–¹å¼æ”¹å˜ Map ä¸­é”®å¯¹åº”çš„å€¼ï¼š

ğŸï¸       
              ğŸ‘‡
val map = mutableMapOf("key1" to 1, "key2" to 2)
    ğŸ‘‡
map.put("key1", 2)
   ğŸ‘‡
map["key1"] = 2    
Kotlin
è¿™é‡Œç”¨åˆ°äº†ã€Œæ“ä½œç¬¦é‡è½½ã€çš„çŸ¥è¯†ï¼Œå®ç°äº†å’Œæ•°ç»„ä¸€æ ·çš„ã€ŒPositional Access Operationsã€ï¼Œå…³äºè¿™ä¸ªæ¦‚å¿µè¿™é‡Œå…ˆä¸å±•å¼€ï¼Œåé¢ä¼šè®²åˆ°ã€‚

å¯å˜é›†åˆ/ä¸å¯å˜é›†åˆ

ä¸Šé¢ä¿®æ”¹ Map å€¼çš„ä¾‹å­ä¸­ï¼Œåˆ›å»ºå‡½æ•°ç”¨çš„æ˜¯ mutableMapOf() è€Œä¸æ˜¯ mapOf()ï¼Œå› ä¸ºåªæœ‰ mutableMapOf() åˆ›å»ºçš„ Map æ‰å¯ä»¥ä¿®æ”¹ã€‚Kotlin ä¸­é›†åˆåˆ†ä¸ºä¸¤ç§ç±»å‹ï¼šåªè¯»çš„å’Œå¯å˜çš„ã€‚è¿™é‡Œçš„åªè¯»æœ‰ä¸¤å±‚æ„æ€ï¼š

é›†åˆçš„ size ä¸å¯å˜
é›†åˆä¸­çš„å…ƒç´ å€¼ä¸å¯å˜
ä»¥ä¸‹æ˜¯ä¸‰ç§é›†åˆç±»å‹åˆ›å»ºä¸å¯å˜å’Œå¯å˜å®ä¾‹çš„ä¾‹å­ï¼š

listOf() åˆ›å»ºä¸å¯å˜çš„ Listï¼ŒmutableListOf() åˆ›å»ºå¯å˜çš„ Listã€‚
setOf() åˆ›å»ºä¸å¯å˜çš„ Setï¼ŒmutableSetOf() åˆ›å»ºå¯å˜çš„ Setã€‚
mapOf() åˆ›å»ºä¸å¯å˜çš„ Mapï¼ŒmutableMapOf() åˆ›å»ºå¯å˜çš„ Mapã€‚
å¯ä»¥çœ‹åˆ°ï¼Œæœ‰ mutable å‰ç¼€çš„å‡½æ•°åˆ›å»ºçš„æ˜¯å¯å˜çš„é›†åˆï¼Œæ²¡æœ‰ mutbale å‰ç¼€çš„åˆ›å»ºçš„æ˜¯ä¸å¯å˜çš„é›†åˆï¼Œä¸è¿‡ä¸å¯å˜çš„å¯ä»¥é€šè¿‡ toMutable*() ç³»å‡½æ•°è½¬æ¢æˆå¯å˜çš„é›†åˆï¼š

ğŸï¸
val strList = listOf("a", "b", "c")
            ğŸ‘‡
strList.toMutableList()
val strSet = setOf("a", "b", "c")
            ğŸ‘‡
strSet.toMutableSet()
val map = mapOf("key1" to 1, "key2" to 2, "key3" to 3, "key4" to 3)
         ğŸ‘‡
map.toMutableMap()
Kotlin
ç„¶åå°±å¯ä»¥å¯¹é›†åˆè¿›è¡Œä¿®æ”¹äº†ï¼Œè¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ä¸‹ï¼š

toMutable*() è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°å»ºçš„é›†åˆï¼ŒåŸæœ‰çš„é›†åˆè¿˜æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥åªèƒ½å¯¹å‡½æ•°è¿”å›çš„é›†åˆä¿®æ”¹ã€‚
Sequence
é™¤äº†é›†åˆ Kotlin è¿˜å¼•å…¥äº†ä¸€ä¸ªæ–°çš„å®¹å™¨ç±»å‹ Sequenceï¼Œå®ƒå’Œ Iterable ä¸€æ ·ç”¨æ¥éå†ä¸€ç»„æ•°æ®å¹¶å¯ä»¥å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œç‰¹å®šçš„å¤„ç†ï¼Œå…ˆæ¥çœ‹çœ‹å¦‚ä½•åˆ›å»ºä¸€ä¸ª Sequenceã€‚

åˆ›å»º
ç±»ä¼¼ listOf() ï¼Œä½¿ç”¨ä¸€ç»„å…ƒç´ åˆ›å»ºï¼š

ğŸï¸
sequenceOf("a", "b", "c")
Kotlin
ä½¿ç”¨ Iterable åˆ›å»ºï¼š

ğŸï¸
val list = listOf("a", "b", "c")
list.asSequence()
Kotlin
è¿™é‡Œçš„ List å®ç°äº† Iterable æ¥å£ã€‚

ä½¿ç”¨ lambda è¡¨è¾¾å¼åˆ›å»ºï¼š

ğŸï¸                          // ğŸ‘‡ ç¬¬ä¸€ä¸ªå…ƒç´ 
val sequence = generateSequence(0) { it + 1 }
                                  // ğŸ‘† lambda è¡¨è¾¾å¼ï¼Œè´Ÿè´£ç”Ÿæˆç¬¬äºŒä¸ªåŠä»¥åçš„å…ƒç´ ï¼Œit è¡¨ç¤ºå‰ä¸€ä¸ªå…ƒç´ 
Kotlin
2020 7.20 17:27
